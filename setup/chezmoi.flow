visibility: public
namespace: chezmoi
tags: [dotfiles]
fromFiles:
  - //setup/chezmoi/.chezmoidata/install-brew.sh
  - //setup/chezmoi/.chezmoidata/install-go.sh
executables:
  - verb: install
    name: cli
    description: Install (chezmoi)[https://www.chezmoi.io/] CLI and apply dotfiles
    exec:
      params:
        - envKey: CHEZMOI_REPO
          text: system
      cmd: sh -c "$(curl -fsLS get.chezmoi.io)" -- init --apply $CHEZMOI_REPO

  - verb: apply
    name: dotfiles
    aliases: [tools]
    description: Apply chezmoi dotfiles
    exec:
      cmd: chezmoi apply

  - verb: show
    name: diff
    description: Show pending chezmoi dotfile changes
    exec:
      cmd: chezmoi git pull -- --autostash --rebase && chezmoi diff


  - verb: install
    name: dotfiles-only
    aliases: [tools-only]
    description: Installs chezmoi temporarily to install dotfiles and tools
    exec:
      params:
        - envKey: CHEZMOI_REPO
          text: system
      cmd: sh -c "$(curl -fsLS get.chezmoi.io)" -- init --one-shot $CHEZMOI_REPO
